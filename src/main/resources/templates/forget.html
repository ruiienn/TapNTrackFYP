<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Forget Password</title>
<link rel="icon" type="images/png" href="/images/nfc.png">
<link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
</head>
<body>
	<div th:replace="fragments/style"></div>
	<div class="container">
		<div class="tnt">

			<i>Forget Password <img src="/images/login.png" class="tnt-icon"></i>
			<!-- Step 1: Email and Username Form -->
			<div id="emailForm">
				<form th:action="@{/forget}" method="post"
					onsubmit="return validateForm();">
					<label for="username" class="label-tnt">Username</label> <input
						type="text" class="input-tnt" id="username" name="username"
						required /> <label for="email" class="label-tnt">Email</label> <input
						type="email" class="input-tnt" id="email" name="email" required />

					<!-- Success/Error Messages for Email Sending -->
					<div th:if="${success}" class="alert alert-success mt-3">
						[[${success}]]</div>
					<div th:if="${error}" class="alert alert-danger mt-3">
						[[${error}]]</div>

					<div class="text-center mt-4">
						<button type="submit" class="btn btn-primary">Send OTP</button>
					</div>
				</form>
			</div>

			<!-- Step 2: Password Form (will be shown after email submission) -->
			<div id="passwordForm" style="display: none;">
				<form th:action="@{/change-password}" method="post">
					<label for="newPassword" class="label-tnt">New Password</label> <input
						type="password" class="input-tnt" id="newPassword"
						name="newPassword" required /> <label for="confirmPassword"
						class="label-tnt">Confirm Password</label> <input type="password"
						class="input-tnt" id="confirmPassword" name="confirmPassword"
						required />

					<div class="text-center mt-4">
						<button type="submit" class="btn btn-primary">Change
							Password</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	</div>

	<script>
		// Form validation to check if both username and email are provided
		function validateForm() {
			var username = document.getElementById("username").value;
			var email = document.getElementById("email").value;

			if (username === "" || email === "") {
				alert("Both username and email are required.");
				return false;
			}

			return true;
		}

		// Simulating the email form submission and displaying the password change form
		function showPasswordForm() {
			document.getElementById("emailForm").style.display = "none"; // Hide email form
			document.getElementById("passwordForm").style.display = "block"; // Show password form
		}
	</script>
</body>
</html>
